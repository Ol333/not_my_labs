---
title: "СПО. Лабораторная работа №6"
summary: Разработка многопоточных приложений
description: Разработка многопоточных приложений
draft: false
math: true
weight: 60
robotsNoIndex: true
showToc: true
TocOpen: false
---

### Задания

1. Написать последовательный вариант программы для расчёта интеграла из [л/р №4 C](/c/lab04).
2. Написать параллельный вариант с использованием `pthreads`.
> Материалы:
> * Справка в вашем дистрибутиве Linux `man pthreads`
> * Глава 11 книги [Разработка Linux-приложений Д. Колисниченко](/books/ssw/Kolisnichenko_Linux_app_dev.pdf)
> * Хабр - [Pthreads: Потоки в русле POSIX](https://habr.com/ru/post/326138/)
> * Руководство на сайте [RANDU](https://randu.org/tutorials/threads/)
> * Руководство на сайте [университета Карнеги-Меллона](https://www.cs.cmu.edu/afs/cs/academic/class/15492-f07/www/pthreads.html)

3. Написать параллельный вариант с использованием OpenMP.
> Материалы:
> * Учебное пособие [А.С. Антонова "Параллельное программирование с использованием технологии OpenMP"](/books/ssw/lab06/Antonov_OpenMP.pdf)
> * Руководства на сайте [OpenMP](https://www.openmp.org/resources/tutorials-articles/)
> * Руководство на сайте [Ливерморской национальной лаборатории](https://hpc-tutorials.llnl.gov/openmp/)

Для заданий 1-3 интеграл считать с точностью около 1e-15 (длительность расчёта последовательного варианта от нескольких десятков секунд), значения выводить до 20 знака после запятой. Используйте тип данных `long double` для достижения требуемой точности.

4. Сравнить время выполнения программ из пп. 1-3 с помощью команды `time`.
5. Написать по своему варианту 2 программы с последовательной реализацией алгоритма и многопоточной с pthreads, сравнить время выполнения.

### Пример

В качестве примера проанализируйте простую программу, умножающую матрицу на вектор. Обратите внимание на размеры матриц, число потоков и передачу данных каждому потоку. Файлы исходного кода примеров и makefile для сборки [тут](/ssw/lab06_src.zip).

### Варианты заданий

1. Многопоточное вычисление определителя матриц порядка \\( N \\).

2. Многопоточное решение задачи о рюкзаке.

3. Многопоточный поиск простых чисел в заданном диапазоне.

4. В заданной директории лежат текстовые файлы вида:
```
Polynom: cn * x ^ pn + c2 * x ^ p2 + c1 * x ^ p1
Interval: [a, b]
Step: s
```

Каждый файл содержит 3 строки: запись полинома с коэффициентами \\( c_i \\) и степенями \\( p_i \\), интервалом \\( [a, b] \\) и шагом \\( s \\) для построения графика. Строки могут находиться в любом порядке.
Реализовать многопоточное приложение, осуществляющее парсинг текстовых файлов, генерацию выходных файлов с таблицами для построения графика и вызов `gnuplot` по окончанию построения таблицы.

5. Многопоточное вычисление значения числа \\( \pi \\) с использованием [задачи Бюффона о бросании иглы](https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%B4%D0%B0%D1%87%D0%B0_%D0%91%D1%8E%D1%84%D1%84%D0%BE%D0%BD%D0%B0_%D0%BE_%D0%B1%D1%80%D0%BE%D1%81%D0%B0%D0%BD%D0%B8%D0%B8_%D0%B8%D0%B3%D0%BB%D1%8B):
$$ \pi \approx \frac{2Ln}{rh}, $$
при условии \\( r > L \\),
где \\( L \\) - длина иглы, \\( n \\) - число игл, \\( r \\) - расстояние между прямыми, \\( h \\) - число игл, пересекающих прямые.

6. Многопоточный поиск в текстовых файлах. На вход подаётся путь к директории и искомый текст. Все .txt файлы в этой директории проверяются и, в случае нахожения текста в файле, выводится путь к файлу, строка и позиция в строке. Вложенные директории проверяются аналогично.

7. Многопоточное решение задачи об упаковке кругов равного размера и минимизации пустого пространства внутри квадрата с заданной стороной.

8. Многопоточное решение задачи об оптимальном пути в графе с использованием муравьиного алгоритма. В качестве графа используйте станции метро [Санкт-Петербурга](https://yandex.ru/metro/saint-petersburg), Бухареста, Вены, Милана или Стокгольма со временем между станциями на рёбрах.

9. Многопоточная сортировка массива произвольной длины.

10. Многопоточный обход дерева каталогов для подсчёта размера файлов.

11. Поток-генератор порождает расчётные задачи, поток-решатель сохраняет условие задачи и результат решения в файл. Найти соотношение генераторов к решателям, при котором длина очереди заданий:
* преимущественно нулевая,
* остаётся близкой к некоторой фиксированной константе \\( c \neq 0 \\).

В качестве задач можно взять вычисление алгебраических выражений, интегралов, матричные расчёты и т.д.

12. Многопоточное умножение матриц большого размера.
