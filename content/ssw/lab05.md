---
title: "СПО. Лабораторная работа №5"
summary: Создание модуля ядра
description: Создание модуля ядра
draft: false
math: false
weight: 50
robotsNoIndex: true
showToc: true
TocOpen: false
---

### Задание

Создать модуль ядра - драйвер символьного устройства по своему варианту.


### Ход работы

Приведена последовательость работы для Debian 11. На других дистрибутивах может отличаться.

1. Установите необходимые пакеты

```bash
sudo apt install build-essential kmod linux-headers-`uname -r`
```

2. Скачайте и распакуйте [архив с примерами](/ssw_pm/lab05_kmods.zip).

3. Зайдите в директорию `hello` и соберите модуль командой:
```bash
make
```

4. Для работы с модулями вам понадобятся следующие команды:

```bash
lsmod
lsmod | grep <название>
sudo modinfo <название>.ko
sudo insmod <название>.ko
sudo rmmod <название>
sudo journalctl --since "5 minutes ago" | grep kernel
```

5. Удостоверьтесь что модуль коректно загружается и выгружается.

6. Переходите к модулю `chardev`.
    * удостоверьтесь что модуль корректно работает
    * разберите код

7. Приступайте к реализации собственного модуля.

> **Материалы**:
>* Книга [The Linux Kernel Module Programming Guide](https://sysprog21.github.io/lkmpg/)
>* Курс СПбГЭТУ "ЛЭТИ" [Разработка модулей ядра Linux](https://stepik.org/course/2051)

### Варианты заданий

Cимвольное устройство для:
1. защиты конфиденциальных данных (шифрование по записи, дешифрование по чтению).
2. межпроцессного взаимодействия - сохранять и извлекать данные по pid.
3. генерации звуковых сигналов в соответствии с переданными на него данными.
4. сортировки данных, отправленных на него (числовые и строковые данные).
5. генерирования паролей с заданными параметрами.
6. вычисления прошедшего временного промежутка - время заcекается по записи, по чтению - выводится прошедшее.
7. мониторинга состояния системы - температура ЦП, объем используемой памяти, диска и т.п.
8. хранения и выполнения очереди команд по запросу.
9. генерирования псевдослучайных чисел - целые в заданном диапазоне, вещественные в заданном диапазоне.
10. генерирования данных о содержимом заданной директории, включая поддиректории.
11. преобразования данных в двоичное или шестнадчатиричное представление.
12. конвертации указанного локального времени в заданный часовой пояс.
